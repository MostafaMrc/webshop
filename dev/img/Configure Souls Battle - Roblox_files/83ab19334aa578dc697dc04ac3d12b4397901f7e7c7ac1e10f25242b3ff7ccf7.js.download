!function(){var t={1097:function(e,n,t){var o={"./fileUploadComponent.js":1213};function i(e){e=r(e);return t(e)}function r(e){if(t.o(o,e))return o[e];e=new Error("Cannot find module '"+e+"'");throw e.code="MODULE_NOT_FOUND",e}i.keys=function(){return Object.keys(o)},i.resolve=r,(e.exports=i).id=1097},4441:function(e,n,t){var o={"./fileUploadConstants.js":386};function i(e){e=r(e);return t(e)}function r(e){if(t.o(o,e))return o[e];e=new Error("Cannot find module '"+e+"'");throw e.code="MODULE_NOT_FOUND",e}i.keys=function(){return Object.keys(o)},i.resolve=r,(e.exports=i).id=4441},7288:function(e,n,t){var o={"./fileUploadController.js":7408};function i(e){e=r(e);return t(e)}function r(e){if(t.o(o,e))return o[e];e=new Error("Cannot find module '"+e+"'");throw e.code="MODULE_NOT_FOUND",e}i.keys=function(){return Object.keys(o)},i.resolve=r,(e.exports=i).id=7288},6170:function(e,n,t){var o={"./dropzoneDirective.js":884,"./enableFileSelectionDirective.js":6867,"./imagePreviewDirective.js":7479};function i(e){e=r(e);return t(e)}function r(e){if(t.o(o,e))return o[e];e=new Error("Cannot find module '"+e+"'");throw e.code="MODULE_NOT_FOUND",e}i.keys=function(){return Object.keys(o)},i.resolve=r,(e.exports=i).id=6170},1762:function(e,n,t){var o={"./components/templates/fileUpload.html":3117};function i(e){e=r(e);return t(e)}function r(e){if(t.o(o,e))return o[e];e=new Error("Cannot find module '"+e+"'");throw e.code="MODULE_NOT_FOUND",e}i.keys=function(){return Object.keys(o)},i.resolve=r,(e.exports=i).id=1762},3544:function(e){function r(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function l(e){return e.split("/").pop().replace(".html","")}var n={importFilesUnderPath:function(e){e.keys().forEach(e)},templateCacheGenerator:function(e,n,o,i){return e.module(n,[]).run(["$templateCache",function(t){o&&o.keys().forEach(function(e){var n=r(l(e));t.put(n,o(e))}),i&&i.keys().forEach(function(e){var n=r(l(e));t.put(n,i(e).replace(/<\/?script[^>]*>/gi,""))})}])}};e.exports=n},1213:function(e,n,t){"use strict";t.r(n);var o={templateUrl:"file-upload",bindings:{fileUploadInfo:"=",thumbnailState:"<"},controller:"fileUploadController"};t(8793).Z.component("fileUpload",o),n.default=o},386:function(e,n,t){"use strict";t.r(n);var o={effectTypes:{copy:"copy"},eventTypes:{drop:"drop"},defaultMaxFileSizeInMegabytes:4};t(8793).Z.constant("fileUploadConstants",o),n.default=o},7408:function(e,n,t){"use strict";t.r(n);var o=t(8793),s=t(792);function i(t,o,i,r,e,n){var l=this;function a(){return l.fileUploadInfo.maxFileSizeInMegabytes||o.defaultMaxFileSizeInMegabytes}l.getCssClasses=function(){return n.getCssClass(l.thumbnailState)},l.allowedFileTypesString=function(){var e=l.fileUploadInfo.allowedFileTypes;return e?1===e.length?e[0]:e.join(", "):""},l.onFileChange=function(e){var n=l.fileModel[0];e&&(n=e.type===o.eventTypes.drop?(e.preventDefault(),e.originalEvent.dataTransfer.files[0]):e.target.file[0],l.fileModel=[]),n&&(!function(e){if(e&&e.name&&0!==!e.name.length){var n=l.fileUploadInfo.allowedFileTypes;if(!n||0===n.length)return 1;e="."+e.name.split(".").pop().toLowerCase();return n.includes(e)}}(n)?(r.warning(i.get("Message.InvalidFile",{fileTypes:l.allowedFileTypesString()})),l.fileModel=[]):n.size<=1e3*a()*1e3?((e=new FileReader).onload=function(e){t.$apply(function(){l.fileUploadInfo.previewSrc=e.target.result,l.fileUploadInfo.fileSelected=!0,l.fileUploadInfo.file=n,l.thumbnailState=""})},e.readAsDataURL(n)):(r.warning(i.get("Message.InvalidFileSize",{fileSize:a()})),l.fileModel=[]))};l.$onInit=function(){l.fileModel=[],s.DeviceMeta&&!(0,s.DeviceMeta)().isDesktop&&(l.fileUploadInfo.mobileDevice=!0)}}i.$inject=["$scope","fileUploadConstants","languageResource","systemFeedbackService","thumbnailConstants","thumbnailService"],o.Z.controller("fileUploadController",i),n.default=i},884:function(e,n,t){"use strict";t.r(n);t=t(8793);function o(o){var i="dragover";return{scope:{onFileChange:"="},link:function(n,t){function e(e){e.preventDefault();var n=e&&e.originalEvent;return n&&(e.dataTransfer&&(e.dataTransfer.setData("text","anything"),n.dataTransfer.effectAllowed=o.effectTypes.copy),t.addClass(i)),!1}t.on("drop",function(e){e.preventDefault(),n.onFileChange(e),t.removeClass(i)}),t.on("dragover",e),t.on("dragenter",e),t.on("dragleave",function(e){t.removeClass(i)})}}}o.$inject=["fileUploadConstants"],t.Z.directive("dropzone",o),n.default=o},6867:function(e,n,t){"use strict";function o(){return{scope:{onFileChange:"="},require:"ngModel",link:function(n,t,e,o){o.$setViewValue(t[0].files),t.on("change",function(e){o.$setViewValue(t[0].files),"function"==typeof n.onFileChange&&n.onFileChange()})}}}t.r(n),t(8793).Z.directive("enableFileSelection",o),n.default=o},7479:function(e,n,t){"use strict";function o(){return{link:function(e,r){r.on("load",function(e){r.removeClass("scale-height"),r.removeClass("scale-width");var n=r[0],t=n.parentElement,o=t.clientHeight,i=t.clientWidth,t=n.naturalHeight,n=n.naturalWidth;t<o&&n<i&&(t=n<t?"scale-height":"scale-width",r.addClass(t))})}}}t.r(n),t(8793).Z.directive("imagePreview",o),n.default=o},8793:function(e,n,t){"use strict";var o=t(5734),o=t.n(o),i=t(792),o=o().module("fileUpload",["fileUploadHtmlTemplate","systemFeedback","thumbnails"]).config(["languageResourceProvider",function(e){var n=(new i.TranslationResourceProvider).getTranslationResource("Feature.FileUploadComponent");e.setTranslationResources([n])}]);n.Z=o},3117:function(e){e.exports='<div id="file-upload-widget"> <div class="file-upload-content"> <div class="thumbnail-holder asset-thumb-container image-wrapper contain" ng-class="$ctrl.getCssClasses()"> <img class="image" ng-if="$ctrl.fileUploadInfo.previewSrc" ng-src="{{ $ctrl.fileUploadInfo.previewSrc }}" image-preview/> <div class="preview-overlay" ng-show="$ctrl.fileUploadInfo.fileSelected"> <div class="font-caption-header preview-text text-overflow" ng-bind="$ctrl.fileUploadInfo.file.name"></div> </div> </div> <dropzone class="dropzone" ng-show="!$ctrl.fileUploadInfo.mobileDevice" on-file-change="$ctrl.onFileChange"></dropzone> <div class="instruction-container"> <div ng-show="!$ctrl.fileUploadInfo.mobileDevice"> <p class="instruction-text" ng-bind="\'Label.DragImage\' | translate"></p> <p class="text-on-line"> — <span ng-bind="\'Label.Or\' | translate"></span> — </p> </div> <input type="file" name="file" id="selectFile" class="hidden file-upload-elem" ng-model="$ctrl.fileModel" on-file-change="$ctrl.onFileChange" accept="{{ $ctrl.allowedFileTypesString() }}" enable-file-selection/> <label for="selectFile" class="btn-control-sm btn-action file-btn" ng-bind="$ctrl.fileUploadInfo.mobileDevice ? (\'Label.SelectFromDevice\' | translate) : (\'Label.SelectFromComputer\' | translate)"> </label> </div> </div> </div> '},792:function(e){"use strict";e.exports=Roblox},5734:function(e){"use strict";e.exports=angular}},o={};function i(e){if(o[e])return o[e].exports;var n=o[e]={exports:{}};return t[e](n,n.exports,i),n.exports}i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,{a:n}),n},i.d=function(e,n){for(var t in n)i.o(n,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e=i(5734),n=i.n(e),t=i(3544);i(8793),(0,t.importFilesUnderPath)(i(7288)),(0,t.importFilesUnderPath)(i(4441)),(0,t.importFilesUnderPath)(i(1097)),(0,t.importFilesUnderPath)(i(6170)),e=i(1762),(0,t.templateCacheGenerator)(n(),"fileUploadHtmlTemplate",e)}()}();
//# sourceMappingURL=https://js.rbxcdn.com/8599ecc281c4efeb62c8aaf7b17aa2f1-fileUpload.bundle.min.js.map

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("FileUpload");